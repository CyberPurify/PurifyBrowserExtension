{"version":3,"sources":["content.js"],"names":["TEXT_DIV_CLASSNAME","HIGH_CONFIDENCE_THRESHOLD","LOW_CONFIDENCE_THRESHOLD","THIS_DOMAIN","window","location","hostname","images","bg_images","process_images","type_of_images","tfjs_images","image_parents","image_tags","TOTAL_POSITIVE","ban_image","IMAGE_IN_NUMBER","POSITIVE_IN_NUMBER","POSITIVE_IN_RATE","HIDETAB","BROWSER","navigator","saysWho","temp","userAgent","match","test","exec","slice","join","replace","appName","appVersion","splice","md5cycle","x","k","a","b","c","d","ff","gg","hh","ii","add32","cmn","q","s","t","md51","txt","i","n","length","state","md5blk","substring","tail","charCodeAt","md5blks","hex_chr","split","rhex","j","hex","md5","Ruler","classes","labels","Neutral_position","className","Math","round","probability","is_valid_image","url","indexOf","blurallimgs","srcUrl","srcType","predict_result","elements","document","querySelectorAll","Array","prototype","forEach","call","el","style","getComputedStyle","src","tagName","filter","chrome","runtime","sendMessage","action","href","response","backgroundImage","bg_img_url","getallimgs","tag","md5src","push","setAttribute","onMessage","addListener","message","sender","sendResponse","predictions","FROM_CACHE","clearInterval","autohideallimgs","setInterval","getElementsByTagName","start_watch_time","Date","getTime","watchdog","MutationObserver","mutationsList","observer","current_time","observe","body","characterData","attributes","childList","subtree","toLowerCase","safari_not_fire_event","onload","addEventListener"],"mappings":";AAkBA,IAAMA,EAAqB,gCAGrBC,EAA4B,GAC5BC,EAA2B,GAC3BC,EAAcC,OAAOC,SAASC,SAChCC,EAAS,GACTC,EAAY,GACZC,EAAiB,GACjBC,EAAiB,GACjBC,EAAc,GACdC,EAAgB,GAChBC,EAAa,CAAC,OACdC,EAAiB,EACjBC,EAAY,skCACZC,EAAkB,GAClBC,EAAqB,GACrBC,EAAmB,GACnBC,EAAU,EACVC,EAAU,SAEdC,UAAUC,QAAW,WACKD,IAElBE,EAFIC,EAAcH,UAAdG,UACJC,EAAQD,EAAUC,MAAM,iEAAmE,GAG3F,GAAA,WAAWC,KAAKD,EAAM,IAETF,OADbA,EAAO,kBAAkBI,KAAKH,IAAc,GAC/BD,MAAAA,OAAAA,EAAK,IAAM,IAGxBE,GAAa,WAAbA,EAAM,GAAiB,CAGnBF,GAAS,QAFbA,EAAOC,EAAUC,MAAM,wBAGZF,OAAAA,EAAKK,MAAM,GAAGC,KAAK,KAAKC,QAAQ,MAAO,SAK9CP,GAAS,QAFbA,EAAOC,EAAUC,MAAM,mBAGZF,OAAAA,EAAKK,MAAM,GAAGC,KAAK,KAAKC,QAAQ,MAAO,mBAW/CL,OAPPA,EAAQA,EAAM,GAAK,CAACA,EAAM,GAAIA,EAAM,IAAM,CAACJ,UAAUU,QAASV,UAAUW,WAAY,MAGvE,QAFbT,EAAOC,EAAUC,MAAM,qBAGnBA,EAAMQ,OAAO,EAAG,EAAGV,EAAK,IAGrBE,EAAMI,KAAK,KA/BD,GAkCrB,IAAIK,EAAW,SAASC,EAAGC,GACnBC,IAAAA,EAAIF,EAAE,GACNG,EAAIH,EAAE,GACNI,EAAIJ,EAAE,GACNK,EAAIL,EAAE,GAEVE,EAAII,EAAGJ,EAAGC,EAAGC,EAAGC,EAAGJ,EAAE,GAAI,GAAI,WAC7BI,EAAIC,EAAGD,EAAGH,EAAGC,EAAGC,EAAGH,EAAE,GAAI,IAAK,WAC9BG,EAAIE,EAAGF,EAAGC,EAAGH,EAAGC,EAAGF,EAAE,GAAI,GAAI,WAC7BE,EAAIG,EAAGH,EAAGC,EAAGC,EAAGH,EAAGD,EAAE,GAAI,IAAK,YAC9BC,EAAII,EAAGJ,EAAGC,EAAGC,EAAGC,EAAGJ,EAAE,GAAI,GAAI,WAC7BI,EAAIC,EAAGD,EAAGH,EAAGC,EAAGC,EAAGH,EAAE,GAAI,GAAI,YAC7BG,EAAIE,EAAGF,EAAGC,EAAGH,EAAGC,EAAGF,EAAE,GAAI,IAAK,YAC9BE,EAAIG,EAAGH,EAAGC,EAAGC,EAAGH,EAAGD,EAAE,GAAI,IAAK,UAC9BC,EAAII,EAAGJ,EAAGC,EAAGC,EAAGC,EAAGJ,EAAE,GAAI,EAAG,YAC5BI,EAAIC,EAAGD,EAAGH,EAAGC,EAAGC,EAAGH,EAAE,GAAI,IAAK,YAC9BG,EAAIE,EAAGF,EAAGC,EAAGH,EAAGC,EAAGF,EAAE,IAAK,IAAK,OAC/BE,EAAIG,EAAGH,EAAGC,EAAGC,EAAGH,EAAGD,EAAE,IAAK,IAAK,YAC/BC,EAAII,EAAGJ,EAAGC,EAAGC,EAAGC,EAAGJ,EAAE,IAAK,EAAG,YAC7BI,EAAIC,EAAGD,EAAGH,EAAGC,EAAGC,EAAGH,EAAE,IAAK,IAAK,UAC/BG,EAAIE,EAAGF,EAAGC,EAAGH,EAAGC,EAAGF,EAAE,IAAK,IAAK,YAC/BE,EAAIG,EAAGH,EAAGC,EAAGC,EAAGH,EAAGD,EAAE,IAAK,GAAI,YAE9BC,EAAIK,EAAGL,EAAGC,EAAGC,EAAGC,EAAGJ,EAAE,GAAI,GAAI,WAC7BI,EAAIE,EAAGF,EAAGH,EAAGC,EAAGC,EAAGH,EAAE,GAAI,GAAI,YAC7BG,EAAIG,EAAGH,EAAGC,EAAGH,EAAGC,EAAGF,EAAE,IAAK,GAAI,WAC9BE,EAAII,EAAGJ,EAAGC,EAAGC,EAAGH,EAAGD,EAAE,GAAI,IAAK,WAC9BC,EAAIK,EAAGL,EAAGC,EAAGC,EAAGC,EAAGJ,EAAE,GAAI,GAAI,WAC7BI,EAAIE,EAAGF,EAAGH,EAAGC,EAAGC,EAAGH,EAAE,IAAK,EAAG,UAC7BG,EAAIG,EAAGH,EAAGC,EAAGH,EAAGC,EAAGF,EAAE,IAAK,IAAK,WAC/BE,EAAII,EAAGJ,EAAGC,EAAGC,EAAGH,EAAGD,EAAE,GAAI,IAAK,WAC9BC,EAAIK,EAAGL,EAAGC,EAAGC,EAAGC,EAAGJ,EAAE,GAAI,EAAG,WAC5BI,EAAIE,EAAGF,EAAGH,EAAGC,EAAGC,EAAGH,EAAE,IAAK,GAAI,YAC9BG,EAAIG,EAAGH,EAAGC,EAAGH,EAAGC,EAAGF,EAAE,GAAI,IAAK,WAC9BE,EAAII,EAAGJ,EAAGC,EAAGC,EAAGH,EAAGD,EAAE,GAAI,GAAI,YAC7BC,EAAIK,EAAGL,EAAGC,EAAGC,EAAGC,EAAGJ,EAAE,IAAK,GAAI,YAC9BI,EAAIE,EAAGF,EAAGH,EAAGC,EAAGC,EAAGH,EAAE,GAAI,GAAI,UAC7BG,EAAIG,EAAGH,EAAGC,EAAGH,EAAGC,EAAGF,EAAE,GAAI,GAAI,YAC7BE,EAAII,EAAGJ,EAAGC,EAAGC,EAAGH,EAAGD,EAAE,IAAK,IAAK,YAE/BC,EAAIM,EAAGN,EAAGC,EAAGC,EAAGC,EAAGJ,EAAE,GAAI,GAAI,QAC7BI,EAAIG,EAAGH,EAAGH,EAAGC,EAAGC,EAAGH,EAAE,GAAI,IAAK,YAC9BG,EAAII,EAAGJ,EAAGC,EAAGH,EAAGC,EAAGF,EAAE,IAAK,GAAI,YAC9BE,EAAIK,EAAGL,EAAGC,EAAGC,EAAGH,EAAGD,EAAE,IAAK,IAAK,UAC/BC,EAAIM,EAAGN,EAAGC,EAAGC,EAAGC,EAAGJ,EAAE,GAAI,GAAI,YAC7BI,EAAIG,EAAGH,EAAGH,EAAGC,EAAGC,EAAGH,EAAE,GAAI,GAAI,YAC7BG,EAAII,EAAGJ,EAAGC,EAAGH,EAAGC,EAAGF,EAAE,GAAI,IAAK,WAC9BE,EAAIK,EAAGL,EAAGC,EAAGC,EAAGH,EAAGD,EAAE,IAAK,IAAK,YAC/BC,EAAIM,EAAGN,EAAGC,EAAGC,EAAGC,EAAGJ,EAAE,IAAK,EAAG,WAC7BI,EAAIG,EAAGH,EAAGH,EAAGC,EAAGC,EAAGH,EAAE,GAAI,IAAK,WAC9BG,EAAII,EAAGJ,EAAGC,EAAGH,EAAGC,EAAGF,EAAE,GAAI,IAAK,WAC9BE,EAAIK,EAAGL,EAAGC,EAAGC,EAAGH,EAAGD,EAAE,GAAI,GAAI,UAC7BC,EAAIM,EAAGN,EAAGC,EAAGC,EAAGC,EAAGJ,EAAE,GAAI,GAAI,WAC7BI,EAAIG,EAAGH,EAAGH,EAAGC,EAAGC,EAAGH,EAAE,IAAK,IAAK,WAC/BG,EAAII,EAAGJ,EAAGC,EAAGH,EAAGC,EAAGF,EAAE,IAAK,GAAI,WAC9BE,EAAIK,EAAGL,EAAGC,EAAGC,EAAGH,EAAGD,EAAE,GAAI,IAAK,WAE9BC,EAAIO,EAAGP,EAAGC,EAAGC,EAAGC,EAAGJ,EAAE,GAAI,GAAI,WAC7BI,EAAII,EAAGJ,EAAGH,EAAGC,EAAGC,EAAGH,EAAE,GAAI,GAAI,YAC7BG,EAAIK,EAAGL,EAAGC,EAAGH,EAAGC,EAAGF,EAAE,IAAK,IAAK,YAC/BE,EAAIM,EAAGN,EAAGC,EAAGC,EAAGH,EAAGD,EAAE,GAAI,IAAK,UAC9BC,EAAIO,EAAGP,EAAGC,EAAGC,EAAGC,EAAGJ,EAAE,IAAK,EAAG,YAC7BI,EAAII,EAAGJ,EAAGH,EAAGC,EAAGC,EAAGH,EAAE,GAAI,IAAK,YAC9BG,EAAIK,EAAGL,EAAGC,EAAGH,EAAGC,EAAGF,EAAE,IAAK,IAAK,SAC/BE,EAAIM,EAAGN,EAAGC,EAAGC,EAAGH,EAAGD,EAAE,GAAI,IAAK,YAC9BC,EAAIO,EAAGP,EAAGC,EAAGC,EAAGC,EAAGJ,EAAE,GAAI,EAAG,YAC5BI,EAAII,EAAGJ,EAAGH,EAAGC,EAAGC,EAAGH,EAAE,IAAK,IAAK,UAC/BG,EAAIK,EAAGL,EAAGC,EAAGH,EAAGC,EAAGF,EAAE,GAAI,IAAK,YAC9BE,EAAIM,EAAGN,EAAGC,EAAGC,EAAGH,EAAGD,EAAE,IAAK,GAAI,YAC9BC,EAAIO,EAAGP,EAAGC,EAAGC,EAAGC,EAAGJ,EAAE,GAAI,GAAI,WAC7BI,EAAII,EAAGJ,EAAGH,EAAGC,EAAGC,EAAGH,EAAE,IAAK,IAAK,YAC/BG,EAAIK,EAAGL,EAAGC,EAAGH,EAAGC,EAAGF,EAAE,GAAI,GAAI,WAC7BE,EAAIM,EAAGN,EAAGC,EAAGC,EAAGH,EAAGD,EAAE,GAAI,IAAK,WAE9BD,EAAE,GAAKU,EAAMR,EAAGF,EAAE,IAClBA,EAAE,GAAKU,EAAMP,EAAGH,EAAE,IAClBA,EAAE,GAAKU,EAAMN,EAAGJ,EAAE,IAClBA,EAAE,GAAKU,EAAML,EAAGL,EAAE,KAIlBW,EAAM,SAASC,EAAGV,EAAGC,EAAGH,EAAGa,EAAGC,GAEvBJ,OADPR,EAAIQ,EAAMA,EAAMR,EAAGU,GAAIF,EAAMV,EAAGc,IACzBJ,EAAOR,GAAKW,EAAMX,IAAO,GAAKW,EAAKV,IAG1CG,EAAK,SAASJ,EAAGC,EAAGC,EAAGC,EAAGL,EAAGa,EAAGC,GACzBH,OAAAA,EAAKR,EAAIC,GAAQD,EAAKE,EAAIH,EAAGC,EAAGH,EAAGa,EAAGC,IAG7CP,EAAK,SAASL,EAAGC,EAAGC,EAAGC,EAAGL,EAAGa,EAAGC,GACzBH,OAAAA,EAAKR,EAAIE,EAAMD,GAAMC,EAAKH,EAAGC,EAAGH,EAAGa,EAAGC,IAG7CN,EAAK,SAASN,EAAGC,EAAGC,EAAGC,EAAGL,EAAGa,EAAGC,GACzBH,OAAAA,EAAIR,EAAIC,EAAIC,EAAGH,EAAGC,EAAGH,EAAGa,EAAGC,IAGlCL,EAAK,SAASP,EAAGC,EAAGC,EAAGC,EAAGL,EAAGa,EAAGC,GACzBH,OAAAA,EAAIP,GAAKD,GAAME,GAAKH,EAAGC,EAAGH,EAAGa,EAAGC,IAGvCC,EAAO,SAASF,GACZG,IAGAC,EAFAC,EAAIL,EAAEM,OACNC,EAAQ,CAAC,YAAa,WAAY,WAAY,WAE7CH,IAAAA,EAAI,GAAIA,GAAKJ,EAAEM,OAAQF,GAAK,GAC7BlB,EAASqB,EAAOC,EAAOR,EAAES,UAAUL,EAAI,GAAIA,KAE/CJ,EAAIA,EAAES,UAAUL,EAAI,IAChBM,IAAAA,EAAO,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACpDN,IAAAA,EAAI,EAAGA,EAAIJ,EAAEM,OAAQF,IACtBM,EAAKN,GAAK,IAAMJ,EAAEW,WAAWP,KAAQA,EAAI,GAAM,GAE/CA,GADJM,EAAKN,GAAK,IAAM,MAAUA,EAAI,GAAM,GAChCA,EAAI,GAECA,IADLlB,EAASqB,EAAOG,GACXN,EAAI,EAAGA,EAAI,GAAIA,IAAKM,EAAKN,GAAK,EAIhCG,OAFPG,EAAK,IAAU,EAAJL,EACXnB,EAASqB,EAAOG,GACTH,GAkBPC,EAAS,SAASR,GACdY,IACAR,EADAQ,EAAU,GAETR,IAAAA,EAAI,EAAGA,EAAI,GAAIA,GAAK,EACrBQ,EAAQR,GAAK,GAAKJ,EAAEW,WAAWP,IAAMJ,EAAEW,WAAWP,EAAI,IAAM,IAAMJ,EAAEW,WAAWP,EAAI,IAAM,KAAOJ,EAAEW,WAAWP,EAAI,IAAM,IAEpHQ,OAAAA,GAGPC,EAAU,mBAAmBC,MAAM,IAEnCC,EAAO,SAASV,GAGTW,IAFHhB,IAAAA,EAAI,GACJgB,EAAI,EACDA,EAAI,EAAGA,IACVhB,GAAKa,EAASR,GAAU,EAAJW,EAAQ,EAAM,IAAQH,EAASR,GAAU,EAAJW,EAAU,IAChEhB,OAAAA,GAGPiB,EAAM,SAAS9B,GACV,IAAA,IAAIiB,EAAI,EAAGA,EAAIjB,EAAEmB,OAAQF,IAC1BjB,EAAEiB,GAAKW,EAAK5B,EAAEiB,IACXjB,OAAAA,EAAEN,KAAK,KAGdqC,EAAM,SAASlB,GACRiB,OAAAA,EAAIf,EAAKF,KAShBH,EAAQ,SAASR,EAAGC,GACZD,OAAAA,EAAIC,EAAK,YAIrB,SAAS6B,EAAMC,GACXC,OAAS,GACTC,iBAAmB,EACd,IAAA,IAAIlB,EAAI,EAAGA,EAAIgB,EAAQd,OAAQF,IAChCiB,OAAOD,EAAQhB,GAAGmB,WAAcC,KAAKC,MAA+B,IAAzBL,EAAQhB,GAAGsB,aAAqB,IAC/C,WAAxBN,EAAQhB,GAAGmB,YAA0BD,iBAAmBlB,GAG5DiB,OAAAA,OAAM,YAAkB,IACjB,EACAA,OAAM,UAAgB,IACtB,EACAA,OAAM,MAAY,GAElB,EACCA,OAAM,SAAeA,OAAM,YAAmB,KAAQC,iBAAmB,EAC1E,EACCD,OAAM,KAAWA,OAAM,MAAa,KAAQC,iBAAmB,EAChE,EACCD,OAAM,KAAWA,OAAM,YAAmB,KAAQC,iBAAmB,EACtE,EACCD,OAAM,KAAWA,OAAM,UAAiB,KAAQC,iBAAmB,EACpE,EACCD,OAAM,WAAiBA,OAAM,MAAa,KAAQC,iBAAmB,EACtE,EAEA,EAIf,SAASK,EAAeC,GAChBA,OAA0B,GAA1BA,EAAIC,QAAQ,YAA2C,GAAxBD,EAAIC,QAAQ,UAAyC,GAAxBD,EAAIC,QAAQ,UAAyC,GAAxBD,EAAIC,QAAQ,UAAyC,GAAxBD,EAAIC,QAAQ,UAA0C,GAAzBD,EAAIC,QAAQ,SACxJ,EAEJ,EASX,SAASC,EAAYC,EAAQC,EAASC,GAE9BC,IAAAA,EAAWC,SAASC,iBAAiBvE,EAAWgB,KAAK,MAIzDwD,MAAMC,UAAUC,QAAQC,KAAKN,EAAU,SAASO,GACxCC,IAAAA,EAAQtF,OAAOuF,iBAAiBF,GAAI,GACpCA,EAAGG,KAAOb,EACS,QAAfU,EAAGI,UAEmB,GAAlBZ,EAIAQ,EAAGC,MAAMI,OAAS,aAKlBL,EAAGC,MAAMI,OAAS,cAGbrF,EAAe6C,QAAUtC,GAAmBF,GAAkBG,GAAwBR,EAAe6C,OAAStC,GAAoBF,EAAiBL,EAAe6C,QAAWpC,IAC/J,GAAXC,IACAA,EAAU,EACV4E,OAAOC,QAAQC,YAAY,CAAEC,OAAQ,UAAWtB,IAAKxE,OAAOC,SAAS8F,MAAQ,SAASC,SAYtE,QAAzBV,EAAMW,iBAA6BpB,EAAiB,IAC3DqB,WAAaZ,EAAMW,gBAAgBzE,MAAM,GAAI,GAAGE,QAAQ,QAAS,IAC7DwE,YAAcvB,IACdU,EAAGC,MAAMW,gBAAkB,QAAUtF,EAAY,MAG5CN,EAAe6C,QAAUtC,GAAmBF,GAAkBG,GAAwBR,EAAe6C,OAAStC,GAAoBF,EAAiBL,EAAe6C,QAAWpC,IAC/J,GAAXC,IACAA,EAAU,EACV4E,OAAOC,QAAQC,YAAY,CAAEC,OAAQ,UAAWtB,IAAKxE,OAAOC,SAAS8F,MAAQ,SAASC,WAe9G,SAASG,EAAWC,GAQZtB,IAAAA,EAAWC,SAASC,iBAAiB,YAIzCC,MAAMC,UAAUC,QAAQC,KAAKN,EAAU,SAASO,GACxCC,IAAAA,EAAQtF,OAAOuF,iBAAiBF,GAAI,GACrB,QAAfA,EAAGI,SACHY,OAASvC,EAAIuB,EAAGG,KACF,IAAVH,EAAGG,MAAgD,GAAnCnF,EAAeoE,QAAQ4B,SAA2C,GAA1B9B,EAAec,EAAGG,OAC1EnF,EAAeiG,KAAKD,QAGT,UAAPD,IAGAf,EAAGC,MAAMI,OAAS,cAKtBL,EAAGkB,aAAa,aAAa,GAE7BZ,OAAOC,QAAQC,YAAY,CAAEC,OAAQ,UAAWnB,OAAQU,EAAGG,IAAKZ,QAAS,OAAS,SAASoB,QAK/D,QAAzBV,EAAMW,kBACbC,WAAaZ,EAAMW,gBAAgBzE,MAAM,GAAI,GAAGE,QAAQ,QAAS,IACjE2E,OAASvC,EAAIoC,aAC0B,GAAnCzF,EAAWgE,QAAQY,EAAGI,UACtBhF,EAAW6F,KAAKjB,EAAGI,SAGL,IAAdS,aAAuD,GAAnC7F,EAAeoE,QAAQ4B,SAA+C,GAA9B9B,EAAe2B,aAC3E7F,EAAeiG,KAAKD,WAiBpCV,OAAOC,QAAQY,UAAUC,YAAY,SAACC,EAASC,EAAQC,GAC/CF,GAAAA,GAA8B,YAAnBA,EAAQZ,QAAwBY,EAAQ/B,QAAU+B,EAAQG,YAAa,CAClFC,WAAa,EACTjC,IAAAA,EAAiBd,EAAM2C,EAAQG,aACnCE,cAAcC,GACdtC,EAAYgC,EAAQ/B,OAAQ+B,EAAQ9B,QAASC,GAEzCA,EAAiB,IACjBnE,GAAkB,MAQ9BiF,OAAOC,QAAQC,YAAY,CAAEC,OAAQ,cAAetB,IAAKxE,OAAOC,SAAS8F,MAAQ,SAASC,MAM1F,IAAIgB,EAAkBC,YAAY,WAE1BnC,IAAAA,EAAWC,SAASmC,qBAAqB,OAC7CjC,MAAMC,UAAUC,QAAQC,KAAKN,EAAU,SAASO,GAC5CA,EAAGC,MAAMI,OAAS,gBAGvB,KAGCyB,GAAmB,IAAIC,MAAOC,UAElC,SAASC,IAELnB,EAAW,UAWI,IAAIoB,iBATJ,SAASC,EAAeC,GAC/BC,IAAAA,GAAe,IAAIN,MAAOC,UAC1BK,EAAeP,EAAmB,MAClCA,EAAmBO,EAGnBvB,EAAW,aAWVwB,QAAQ5C,SAAS6C,KAPb,CACTC,eAAe,EACfC,YAAY,EACZC,WAAW,EACXC,SAAS,IAMjB,IAA0D,GAAtD/G,UAAUC,QAAQ+G,cAAcxD,QAAQ,UAAiB,CACrDyD,IAAAA,EAAwBjB,YAAY,WACpCd,EAAW,YAEZ,KACHnG,OAAOmI,OAAS,WACZb,IACAP,cAAcmB,SAGXjH,UAAUC,QAAQ+G,cAAcxD,QAAQ,WAE/CM,SAASqD,iBAAiB,mBAAoB,WAC1Cd","file":"content.min.js","sourceRoot":"../background-page","sourcesContent":["/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\n// class name for all text nodes added by this script.\nconst TEXT_DIV_CLASSNAME = 'tfjs_mobilenet_extension_text';\n// Thresholds for LOW_CONFIDENCE_THRESHOLD and HIGH_CONFIDENCE_THRESHOLD,\n// controlling which messages are printed.\nconst HIGH_CONFIDENCE_THRESHOLD = 0.5;\nconst LOW_CONFIDENCE_THRESHOLD = 0.1;\nconst THIS_DOMAIN = window.location.hostname;\nvar images = [],\n    bg_images = [],\n    process_images = [],\n    type_of_images = [],\n    tfjs_images = [],\n    image_parents = [],\n    image_tags = [\"IMG\"];\nvar TOTAL_POSITIVE = 0;\nvar ban_image = \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBwgIBwcHCAcHBwcHBwoHBwcHBw8ICQcKFREiFhURExMYHCggGCYlGxMTITEhMSkrLi4uFx8zODMsNygtLisBCgoKDQ0NDg0NDy0ZFRk3NysrKysrKysrKysrKysrKysrKys3KysrKysrKysrKysrKysrKysrKysrKysrKysrK//AABEIAKgBLAMBIgACEQEDEQH/xAAYAAEBAQEBAAAAAAAAAAAAAAAAAQIHA//EABYQAQEBAAAAAAAAAAAAAAAAAAABEf/EABcBAQEBAQAAAAAAAAAAAAAAAAABAgP/xAAYEQEBAQEBAAAAAAAAAAAAAAAAARESAv/aAAwDAQACEQMRAD8A7eAAAAACAAAAAAIoCAAgqAAAgqAgoCCgIKACgIKAKAKCgAAAAAAAAgoCCgIKAgqAIqAIoCAAAAAAAoIKAgoCKACigAACAKAAAAAAAAAAAAigIACCgIKAgoCCgIKAAAAAigAoAIAAIDQoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgAAAAICiAKgUAQAABsAAAAAAAAAAAAAAAAAAAAEAAAEAUQAAAAAABBQEFAaAAAAAAAAAAAAAAAABAVAABAVAEEAAAFEAURRQAAAAFBQAAAAAAAAAAAAAEAAEBUAQEAAAAQRQBQABUAUAUUAAAUAAAAAAAAAAACotQAABFQBAQBA1AQNFEDTFEDTFVlTRRA0URTVVWVBVRVAAAAAAAAAAAACotQAEQEVE0QETVE0TU0xdNZ01OjF01nTU6Ma1dY006XG9NZ01ejGtNZ1ToxpWVXTGosZWLKjSpFaiACgAAAAAAAAABUWoAi1mpVKhWaxaoJqWsauGpalrNrF9LjWprOprPS43prGmp2uN6axpp0Y3q689XV6Mb1dY1ZV6TG5VYlalalTG41GI1G5UrUaZjTrGaAKgAAAAAAAAABUAEqUGasZrNByrUZtZtBytbjNrNqjna1Izamg521rE00Gdq4auoLpi6ugsqYutSg3KjUqwHSM1qNxR18sVqNA7eWK//Z\";\nvar IMAGE_IN_NUMBER = 30;\nvar POSITIVE_IN_NUMBER = 10;\nvar POSITIVE_IN_RATE = 0.3;\nvar HIDETAB = 0;\nvar BROWSER = \"safari\";\n\nnavigator.saysWho = (() => {\n    const { userAgent } = navigator\n    let match = userAgent.match(/(opera|chrome|safari|firefox|msie|trident(?=\\/))\\/?\\s*(\\d+)/i) || []\n    let temp\n\n    if (/trident/i.test(match[1])) {\n        temp = /\\brv[ :]+(\\d+)/g.exec(userAgent) || []\n        return `IE ${temp[1] || ''}`\n    }\n\n    if (match[1] === 'Chrome') {\n        temp = userAgent.match(/\\b(OPR|Edge)\\/(\\d+)/)\n\n        if (temp !== null) {\n            return temp.slice(1).join(' ').replace('OPR', 'Opera')\n        }\n\n        temp = userAgent.match(/\\b(Edg)\\/(\\d+)/)\n\n        if (temp !== null) {\n            return temp.slice(1).join(' ').replace('Edg', 'Edge (Chromium)')\n        }\n    }\n\n    match = match[2] ? [match[1], match[2]] : [navigator.appName, navigator.appVersion, '-?']\n    temp = userAgent.match(/version\\/(\\d+)/i)\n\n    if (temp !== null) {\n        match.splice(1, 1, temp[1])\n    }\n\n    return match.join(' ')\n})()\n\nvar md5cycle = function(x, k) {\n    var a = x[0],\n        b = x[1],\n        c = x[2],\n        d = x[3];\n\n    a = ff(a, b, c, d, k[0], 7, -680876936);\n    d = ff(d, a, b, c, k[1], 12, -389564586);\n    c = ff(c, d, a, b, k[2], 17, 606105819);\n    b = ff(b, c, d, a, k[3], 22, -1044525330);\n    a = ff(a, b, c, d, k[4], 7, -176418897);\n    d = ff(d, a, b, c, k[5], 12, 1200080426);\n    c = ff(c, d, a, b, k[6], 17, -1473231341);\n    b = ff(b, c, d, a, k[7], 22, -45705983);\n    a = ff(a, b, c, d, k[8], 7, 1770035416);\n    d = ff(d, a, b, c, k[9], 12, -1958414417);\n    c = ff(c, d, a, b, k[10], 17, -42063);\n    b = ff(b, c, d, a, k[11], 22, -1990404162);\n    a = ff(a, b, c, d, k[12], 7, 1804603682);\n    d = ff(d, a, b, c, k[13], 12, -40341101);\n    c = ff(c, d, a, b, k[14], 17, -1502002290);\n    b = ff(b, c, d, a, k[15], 22, 1236535329);\n\n    a = gg(a, b, c, d, k[1], 5, -165796510);\n    d = gg(d, a, b, c, k[6], 9, -1069501632);\n    c = gg(c, d, a, b, k[11], 14, 643717713);\n    b = gg(b, c, d, a, k[0], 20, -373897302);\n    a = gg(a, b, c, d, k[5], 5, -701558691);\n    d = gg(d, a, b, c, k[10], 9, 38016083);\n    c = gg(c, d, a, b, k[15], 14, -660478335);\n    b = gg(b, c, d, a, k[4], 20, -405537848);\n    a = gg(a, b, c, d, k[9], 5, 568446438);\n    d = gg(d, a, b, c, k[14], 9, -1019803690);\n    c = gg(c, d, a, b, k[3], 14, -187363961);\n    b = gg(b, c, d, a, k[8], 20, 1163531501);\n    a = gg(a, b, c, d, k[13], 5, -1444681467);\n    d = gg(d, a, b, c, k[2], 9, -51403784);\n    c = gg(c, d, a, b, k[7], 14, 1735328473);\n    b = gg(b, c, d, a, k[12], 20, -1926607734);\n\n    a = hh(a, b, c, d, k[5], 4, -378558);\n    d = hh(d, a, b, c, k[8], 11, -2022574463);\n    c = hh(c, d, a, b, k[11], 16, 1839030562);\n    b = hh(b, c, d, a, k[14], 23, -35309556);\n    a = hh(a, b, c, d, k[1], 4, -1530992060);\n    d = hh(d, a, b, c, k[4], 11, 1272893353);\n    c = hh(c, d, a, b, k[7], 16, -155497632);\n    b = hh(b, c, d, a, k[10], 23, -1094730640);\n    a = hh(a, b, c, d, k[13], 4, 681279174);\n    d = hh(d, a, b, c, k[0], 11, -358537222);\n    c = hh(c, d, a, b, k[3], 16, -722521979);\n    b = hh(b, c, d, a, k[6], 23, 76029189);\n    a = hh(a, b, c, d, k[9], 4, -640364487);\n    d = hh(d, a, b, c, k[12], 11, -421815835);\n    c = hh(c, d, a, b, k[15], 16, 530742520);\n    b = hh(b, c, d, a, k[2], 23, -995338651);\n\n    a = ii(a, b, c, d, k[0], 6, -198630844);\n    d = ii(d, a, b, c, k[7], 10, 1126891415);\n    c = ii(c, d, a, b, k[14], 15, -1416354905);\n    b = ii(b, c, d, a, k[5], 21, -57434055);\n    a = ii(a, b, c, d, k[12], 6, 1700485571);\n    d = ii(d, a, b, c, k[3], 10, -1894986606);\n    c = ii(c, d, a, b, k[10], 15, -1051523);\n    b = ii(b, c, d, a, k[1], 21, -2054922799);\n    a = ii(a, b, c, d, k[8], 6, 1873313359);\n    d = ii(d, a, b, c, k[15], 10, -30611744);\n    c = ii(c, d, a, b, k[6], 15, -1560198380);\n    b = ii(b, c, d, a, k[13], 21, 1309151649);\n    a = ii(a, b, c, d, k[4], 6, -145523070);\n    d = ii(d, a, b, c, k[11], 10, -1120210379);\n    c = ii(c, d, a, b, k[2], 15, 718787259);\n    b = ii(b, c, d, a, k[9], 21, -343485551);\n\n    x[0] = add32(a, x[0]);\n    x[1] = add32(b, x[1]);\n    x[2] = add32(c, x[2]);\n    x[3] = add32(d, x[3]);\n\n}\n\nvar cmn = function(q, a, b, x, s, t) {\n    a = add32(add32(a, q), add32(x, t));\n    return add32((a << s) | (a >>> (32 - s)), b);\n}\n\nvar ff = function(a, b, c, d, x, s, t) {\n    return cmn((b & c) | ((~b) & d), a, b, x, s, t);\n}\n\nvar gg = function(a, b, c, d, x, s, t) {\n    return cmn((b & d) | (c & (~d)), a, b, x, s, t);\n}\n\nvar hh = function(a, b, c, d, x, s, t) {\n    return cmn(b ^ c ^ d, a, b, x, s, t);\n}\n\nvar ii = function(a, b, c, d, x, s, t) {\n    return cmn(c ^ (b | (~d)), a, b, x, s, t);\n}\n\nvar md51 = function(s) {\n    var txt = '',\n        n = s.length,\n        state = [1732584193, -271733879, -1732584194, 271733878],\n        i;\n    for (i = 64; i <= s.length; i += 64) {\n        md5cycle(state, md5blk(s.substring(i - 64, i)));\n    }\n    s = s.substring(i - 64);\n    var tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n    for (i = 0; i < s.length; i++)\n        tail[i >> 2] |= s.charCodeAt(i) << ((i % 4) << 3);\n    tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n    if (i > 55) {\n        md5cycle(state, tail);\n        for (i = 0; i < 16; i++) tail[i] = 0;\n    }\n    tail[14] = n * 8;\n    md5cycle(state, tail);\n    return state;\n}\n\n/* there needs to be support for Unicode here,\n * unless we pretend that we can redefine the MD-5\n * algorithm for multi-byte characters (perhaps\n * by adding every four 16-bit characters and\n * shortening the sum to 32 bits). Otherwise\n * I suggest performing MD-5 as if every character\n * was two bytes--e.g., 0040 0025 = @%--but then\n * how will an ordinary MD-5 sum be matched?\n * There is no way to standardize text to something\n * like UTF-8 before transformation; speed cost is\n * utterly prohibitive. The JavaScript standard\n * itself needs to look at this: it should start\n * providing access to strings as preformed UTF-8\n * 8-bit unsigned value arrays.\n */\nvar md5blk = function(s) { /* I figured global was faster.   */\n    var md5blks = [],\n        i; /* Andy King said do it this way. */\n    for (i = 0; i < 64; i += 4) {\n        md5blks[i >> 2] = s.charCodeAt(i) + (s.charCodeAt(i + 1) << 8) + (s.charCodeAt(i + 2) << 16) + (s.charCodeAt(i + 3) << 24);\n    }\n    return md5blks;\n}\n\nvar hex_chr = '0123456789abcdef'.split('');\n\nvar rhex = function(n) {\n    var s = '',\n        j = 0;\n    for (; j < 4; j++)\n        s += hex_chr[(n >> (j * 8 + 4)) & 0x0F] + hex_chr[(n >> (j * 8)) & 0x0F];\n    return s;\n}\n\nvar hex = function(x) {\n    for (var i = 0; i < x.length; i++)\n        x[i] = rhex(x[i]);\n    return x.join('');\n}\n\nvar md5 = function(s) {\n    return hex(md51(s));\n}\n\n/* this function is much faster,\nso if possible we use it. Some IEs\nare the only ones I know of that\nneed the idiotic second function,\ngenerated by an if clause.  */\n\nvar add32 = function(a, b) {\n    return (a + b) & 0xFFFFFFFF;\n}\n\n\nfunction Ruler(classes) {\n    labels = []\n    Neutral_position = 7;\n    for (var i = 0; i < classes.length; i++) {\n        labels[classes[i].className] = (Math.round(classes[i].probability * 100) / 100);\n        if (classes[i].className == \"Neutral\") { Neutral_position = i; }\n    }\n\n    if (labels[\"Horror_aug\"] >= 0.78) {\n        return 1;\n    } else if (labels[\"Gory_aug\"] >= 0.75) {\n        return 2;\n    } else if (labels[\"Porn\"] >= 0.7) {\n\n        return 4;\n    } else if ((labels[\"Gory_aug\"] + labels[\"Horror_aug\"]) >= 0.79 && Neutral_position > 1) {\n        return 3;\n    } else if ((labels[\"Porn\"] + labels[\"Sexy\"]) >= 0.75 && Neutral_position > 1) {\n        return 5;\n    } else if ((labels[\"Porn\"] + labels[\"Horror_aug\"]) >= 0.75 && Neutral_position > 1) {\n        return 6;\n    } else if ((labels[\"Porn\"] + labels[\"Gory_aug\"]) >= 0.77 && Neutral_position > 1) {\n        return 7;\n    } else if ((labels[\"Horror_aug\"] + labels[\"Sexy\"]) >= 0.75 && Neutral_position > 1) {\n        return 8;\n    } else {\n        return 0;\n    }\n}\n\nfunction is_valid_image(url) {\n    if (url.indexOf(\"base64\") != -1 || url.indexOf(\".png\") != -1 || url.indexOf(\".svg\") != -1 || url.indexOf(\".gif\") != -1 || url.indexOf(\".jpg\") != -1 || url.indexOf(\".jpeg\") != -1) {\n        return 1;\n    }\n    return 0;\n\n    // if(url.indexOf(\"http://\")==-1 && url.indexOf(\"https://\")==-1 && url.indexOf(\"base64\")==-1 && url.indexOf(\"data:image/svg\")!=-1 && url.indexOf(\".png\")==-1 && url.indexOf(\".gif\")==-1 && url.indexOf(\".jpg\")==-1 && url.indexOf(\".jpeg\")==-1){\n    //   return 0;\n    // }else{\n    //   return 1;\n    // }\n}\n\nfunction blurallimgs(srcUrl, srcType, predict_result) {\n\n    var elements = document.querySelectorAll(image_tags.join(\",\"));\n    // var elements = document.body.getElementsByTagName(\"*\");\n    /* When the DOM is ready find all the images and background images\n        initially loaded */\n    Array.prototype.forEach.call(elements, function(el) {\n        var style = window.getComputedStyle(el, false);\n        if (el.src == srcUrl) {\n            if (el.tagName === \"IMG\") {\n\n                if (predict_result == 0) {\n                    // el.style=\"filter: blur(0px) !important;opacity:1 !important;\";\n                    // el.style.setProperty('filter','blur(0px) !important',\"\");\n                    // el.setAttribute('cp-srcurl', el.src +\" == \"+srcUrl);\n                    el.style.filter = \"blur(0px)\";\n                    // el.style.visibility = \"visible\";\n                } else {\n                    // el.style=\"-webkit-filter: blur(30px) !important;filter: blur(30px) !important;opacity:0.25 !important;\";\n                    // el.style.setProperty('filter','blur(30px) !important',\"\");\n                    el.style.filter = \"blur(30px)\";\n                    // el.style.visibility = \"hidden\";\n                    // console.log(TOTAL_POSITIVE+\"/\"+process_images.length+\" \"+(TOTAL_POSITIVE/process_images.length))\n                    if ((process_images.length <= IMAGE_IN_NUMBER && TOTAL_POSITIVE >= POSITIVE_IN_NUMBER) || (process_images.length > IMAGE_IN_NUMBER && (TOTAL_POSITIVE / process_images.length) >= POSITIVE_IN_RATE)) {\n                        if (HIDETAB == 0) {\n                            HIDETAB = 1;\n                            chrome.runtime.sendMessage({ action: \"hidetab\", url: window.location.href }, function(response) {\n                                // console.log(response.result);\n                            });\n                            // console.log(\"HIDETAB\");\n                        }\n                    }\n                }\n\n\n            }\n\n\n        } else if (style.backgroundImage != \"none\" && predict_result > 0) {\n            bg_img_url = style.backgroundImage.slice(4, -1).replace(/['\"]/g, \"\");\n            if (bg_img_url == srcUrl) {\n                el.style.backgroundImage = \"url('\" + ban_image + \"')\";\n                // console.log(TOTAL_POSITIVE+\"/\"+process_images.length+\" FOUND bg_images \"+bg_img_url);\n                // console.log(TOTAL_POSITIVE+\"/\"+process_images.length+\" \"+(TOTAL_POSITIVE/process_images.length))\n                if ((process_images.length <= IMAGE_IN_NUMBER && TOTAL_POSITIVE >= POSITIVE_IN_NUMBER) || (process_images.length > IMAGE_IN_NUMBER && (TOTAL_POSITIVE / process_images.length) >= POSITIVE_IN_RATE)) {\n                    if (HIDETAB == 0) {\n                        HIDETAB = 1;\n                        chrome.runtime.sendMessage({ action: \"hidetab\", url: window.location.href }, function(response) {\n                            // console.log(response.result);\n                        });\n                        // console.log(\"HIDETAB\");\n                    }\n                }\n            }\n\n        }\n    });\n}\n\n\n// var wait_imgs = []\n\nfunction getallimgs(tag) {\n\n    // if(tag!=\"alltag\"){\n    //   var elements = document.querySelectorAll(image_tags.join(\",\"));\n    // }else{\n    //   var elements = document.getElementsByTagName(\"*\");\n    // }\n\n    var elements = document.querySelectorAll(\"img, div\");\n    // var elements = document.getElementsByTagName(\"*\");\n    /* When the DOM is ready find all the images and background images\n        initially loaded */\n    Array.prototype.forEach.call(elements, function(el) {\n        var style = window.getComputedStyle(el, false);\n        if (el.tagName === \"IMG\") {\n            md5src = md5(el.src);\n            if (el.src != \"\" && process_images.indexOf(md5src) == -1 && is_valid_image(el.src) == 1) {\n                process_images.push(md5src);\n                // wait_imgs.push(el.src);\n                // console.log(\" FOUND IMG \"+el.src);\n                if (tag == \"alltag\") {\n                    // el.style=\"-webkit-filter: blur(30px) !important;filter: blur(30px) !important;opacity:0.25 !important;\";\n                    // el.style.setProperty('filter','blur(30px) !important',\"\");\n                    el.style.filter = \"blur(30px)\";\n                    // el.style.visibility = \"hidden\";\n\n                }\n\n                el.setAttribute('draggable', false);\n                // console.log({ action: \"predict\", srcUrl: el.src, srcType: \"img\" });\n                chrome.runtime.sendMessage({ action: \"predict\", srcUrl: el.src, srcType: \"img\" }, function(response) {\n                    // console.log(response);\n                });\n            }\n\n        } else if (style.backgroundImage != \"none\") {\n            bg_img_url = style.backgroundImage.slice(4, -1).replace(/['\"]/g, \"\");\n            md5src = md5(bg_img_url);\n            if (image_tags.indexOf(el.tagName) == -1) {\n                image_tags.push(el.tagName);\n            }\n\n            if (bg_img_url != \"\" && process_images.indexOf(md5src) == -1 && is_valid_image(bg_img_url) == 1) {\n                process_images.push(md5src);\n                // console.log({ action: \"predict\", srcUrl: bg_img_url, srcType: \"bg\" });\n                // console.log(\" FOUND bg_images \"+bg_img_url);\n                // chrome.runtime.sendMessage({ action: \"predict\", srcUrl: bg_img_url, srcType: \"bg\" }, function(response) {\n                //     // console.log(response.result);\n                // });\n            }\n        }\n    });\n}\n\n\n// Add a listener to hear from the content.js page when the image is through\n// processing.  The message should contin an action, a url, and predictions (the\n// output of the classifier)\n//\n// message: {action, url, predictions}\nchrome.runtime.onMessage.addListener((message, sender, sendResponse) => { //alert(JSON.stringify(message))\n    if (message && message.action === 'predict' && message.srcUrl && message.predictions) {\n        FROM_CACHE = 0;\n        var predict_result = Ruler(message.predictions);\n        clearInterval(autohideallimgs);\n        blurallimgs(message.srcUrl, message.srcType, predict_result);\n\n        if (predict_result > 0) {\n            TOTAL_POSITIVE += 1;\n\n        }\n    }\n\n});\n\n\nchrome.runtime.sendMessage({ action: \"checkdomain\", url: window.location.href }, function(response) {});\n\n// if(navigator.saysWho.toLowerCase().indexOf(\"safari\")==-1){\n// document.getElementsByTagName(\"html\")[0].style.visibility=\"hidden\";\n// }\n\nvar autohideallimgs = setInterval(function() {\n\n    var elements = document.getElementsByTagName(\"img\");\n    Array.prototype.forEach.call(elements, function(el) {\n        el.style.filter = \"blur(30px)\";\n    });\n    //Che nhanh nhất có thể\n}, 100);\n\n\nvar start_watch_time = new Date().getTime();\n\nfunction watchdog() {\n\n    getallimgs(\"alltag\");\n    /* MutationObserver callback to add images when the body changes */\n    var callback = function(mutationsList, observer) {\n        var current_time = new Date().getTime();\n        if (current_time - start_watch_time > 100) {\n            start_watch_time = current_time;\n            // console.log(\"DOM CHANGED \");\n            // phải dùng alltag để tránh lỗi sử dụng background mặc dù chạy nặng hơn\n            getallimgs(\"alltag\");\n        }\n    }\n    var observer = new MutationObserver(callback);\n    var config = {\n        characterData: true,\n        attributes: true,\n        childList: true,\n        subtree: true\n    };\n\n    observer.observe(document.body, config);\n}\n\nif (navigator.saysWho.toLowerCase().indexOf(\"safari\") != -1) {\n    var safari_not_fire_event = setInterval(function() {\n        getallimgs(\"sometag\");\n        //Safari suck không return IMG TAG DOM event when load from cache\n    }, 1000);\n    window.onload = function() {\n        watchdog();\n        clearInterval(safari_not_fire_event);\n    }\n\n} else if (navigator.saysWho.toLowerCase().indexOf(\"firefox\") != -1) {\n\n    document.addEventListener('DOMContentLoaded', function() {\n        watchdog();\n    });\n\n} else {\n\n    document.addEventListener('DOMContentLoaded', function() {\n        watchdog();\n    });\n\n}"]}